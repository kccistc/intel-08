좋아—앞으로 더 만들어야 할 것들을 한 번에 보기 좋게 정리해줄게. (우선순위/대략 난이도 포함)

P0: 바로 하면 좋은 것(기능 안정화)

 워처 재시작 내구성: 이벤트 처리 중 예외시 재시도/드롭 분리, 처리 큐(폴더 → 큐 → 처리 완료표시). (난이도: M)

 중복 방지 강화(서버/워처): 동일 이벤트(type+road+time_bucket) 디듀프, 재방송 주기 상한. (M)

 TTL/시간 동기: 서버·클라 NTP 동기 체크 스크립트, --ttl-s 기본 30s로 상향. (S)

 로그 로테이션: /var/log 텍스트 로그와 /var/archive 용량 기준 보존 정책(예: 7일/5GB). (S)

 권한/소유권 정리: /var/rec, /var/archive, /opt/v2x/*.sqlite3 소유자 통일(전용 v2x 유저). (S)

 헬스체크: 클라 미수신 N초 경고(완료) + 서버도 자체 heartbeat 수신/송신 카운터 노출. (S)

P1: 관제/가시성

 미니 대시보드(웹): 최근 N개 이벤트/상태 표시(Flask/FastAPI + SQLite 조회 + 간단 차트). (M)

 알림 연동: 서버에서 이벤트 발생 시 슬랙/텔레그램 Webhook 전송. (S)

 메트릭스: Prometheus exporter(송/수신 QPS, 드롭 수, 클립 생성 시간). (M)

P1: 보안/신뢰성

 HMAC 키 관리: .env 분리, 키 롤테이션(이중 허용 기간), 키 없는 패킷 거부 옵션. (M)

 서명 필수화 플래그: 서버 --require-sig, 클라 --drop-unsigned. (S)

 입력 밸리데이션: JSON 스키마 검증(Pydantic/jsonschema), 이상 필드 차단. (S)

 systemd Watchdog: WatchdogSec=20s, 프로세스 하트비트 응답 추가. (S)

P1: 성능/자원

 FFmpeg 튜닝: 해상도/프레임/프리셋 프로파일(라즈파이용/PC용). (S)

 세그먼트 가변 길이: 낮은 FPS일 때 5~10초 조절, 클립 생성 속도/품질 옵션. (M)

 클립 생성 파이프라인 캐시: 동일 구간 중복 요청 시 최근 결과 재사용. (M)

P2: 기능 확장

 이벤트 타입 확대: blockage, construction, pedestrian_on_road 등 카테고리 추가. (S)

 긴급도/권고 로직: 거리·차로수·속도 제한 기반 메시지 자동 생성(“우측 차로 감속”). (M)

 멀티 카메라/멀티 RSU: 소스별 source_id, road_id 도입, 다중 인스턴스 관리. (M)

 전송 대상 필터링: 차량 위치/도로 구간 매칭해 해당 구간 차량에만 방송(서브넷/토픽 분리). (M~L)

P2: 배포/운영

 설치 스크립트: install.sh 하나로 의존성/서비스 배치 자동화. (S)

 환경별 프로파일: dev/stage/prod .env 세트, 공통 .env.example. (S)

 CI/CD: GitHub Actions로 린트/테스트, 릴리스 아카이브 생성. (M)

P2: 데이터/백업

 DB 마이그레이션 관리: 버전 테이블, 스키마 변경 스크립트. (S)

 아카이브 인덱싱 보강: 클립 파일 해시/길이/생성시간 기록, 깨진 파일 자동 재생성. (M)

 원격 백업(선택): 오래된 클립을 외장 디스크/NAS로 이동. (M)

(보류 가능) ROS2 연동

 /v2x/alert 퍼블리시 상시화(클라 옵션 플래그). (S)

 정책 노드 패키지화: cmd_vel 정책, 노이즈 필터, 네임스페이스 설정. (M)

 Launch 파일: 차량 부팅 시 정책 노드 자동 실행. (S)

(선택) 감지/분류 고도화

 YOLO + 규칙 기반 스텁 → 실제 모델(충돌/화재/정체). (M~L)

 모델 성능 로그: 감지 신뢰도/프레임레이트, 처리 지연. (M)

 VLM 연계: 클립에서 상황 요약문 생성(나중에). (L)

문서/테스트

 운영 가이드: 서비스별 역할, 포트, 재시작 방법, 트러블슈팅. (S)

 테스트 시나리오 모음: 정상/지연/패킷 드롭/다중 이벤트/장시간 안정성. (S)

 샘플 데이터: 더미 영상/더미 이벤트 세트. (S)
